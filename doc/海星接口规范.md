### 1 海星接口规范
#### 代码
##### 公用
>* 400  成功
>* 401  token过期，重新登入 
>* 402  该课程已发布
>* 403  手机号已注册
>* 405  密码错误
>* 406  数据库错误

### 用户场景
#### 1

##### 场景

>* 用户注册

##### 接口
```php
Param
    u_tel   //手机号
    u_pwd   //密码
    
Function register()
{
    //check u_tel
    if(u_tel存在)
    {
        return 403
    }
    
    insert table users_1
    
    create token
    
     if(数据库错误)
    {
        return 406
    }
    
    return 400
}
```

#### 2
##### 场景
>* 用户登入
##### 接口

```php
Param
    u_tel   //手机号
    u_pwd   //密码
    
Function login()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    //check u_pwd
    if(u_pwd不一致)
    {
        return 404
    }
    
    update token
     
    if(数据库错误)
    {
        return 406
    }
    
    return token
}
```


### 卖家场景
#### 1
##### 场景
>* 卖家创建发布课程
##### 接口

```php
Param
    token      //token
    
    cou_name   //课程名称
    cou_intro  //课程介绍
    cou_major  //课程专业
    cou_detail //课程详情
    cou_img    //课程封面jpg or png
    cou_price  //课程价格
    cou_len    //课程时长
    cou_time   //课程时间
    cou_place  //课程地点

Function cou_release()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    通过token返回u_id
    
    /*
    *insert courses_1、courses_2
    *先通过cou_release_id搜索到该用户全部课程
    *再对比，会比较快
    *
    */
    if(cou_intro,cou_major,cou_name，cou_detail与数据库中的不同)
    {
        return 402
    }
    
     if(数据库错误)
    {
        return 406
    }
    
    return 400 
}
```
#### 2
##### 场景
>* 卖家界面_审核中课程列表
##### 接口

```php
Param
    token
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    select u_id from sys_token where token = token
    
    select * from courses_1、course_2 where 
    courses_1.cou_releaseid = u_id and
    courses_2.cou_state = 0 
    
    if(数据库错误)
    {
        406
    }
    
    return all data
}
```
#### 3
##### 场景
>* 卖家界面_上架中课程列表
##### 接口

```php
Param
    token
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    select u_id from sys_token where token = token
    
    select * from courses_1、course_2 where 
    courses_1.cou_releaseid = u_id and
    courses_2.cou_state = 1 or 2
    
    if(数据库错误)
    {
        406
    }
    
    return all data 
}
```

#### 4
##### 场景
>* 卖家界面_已下架课程列表
##### 接口

```php
Param
    token
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    select u_id from sys_token where token = token
    
    select * from courses_1、course_2 where 
    courses_1.cou_releaseid = u_id and
    courses_2.cou_state = 3
    
    if(数据库错误)
    {
        406
    }
    
    return all data 
}
```
### 买家场景
#### 1
##### 场景
>* 买家将课程加入购物车
##### 接口

```php
Param
    token       //token
    
    cou_id     //课程ID
    cou_num    //购买数量
Function cou_shopping()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    通过token返回u_id
    
    insert into shopping_carts
    
    if(数据库错误)
    {
        return 406
    }
    return 400
}

```
#### 2
##### 场景
>* 买家购物车列表
##### 接口

```php
Param
    token   //token
Function get_carts()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    通过token返回u_id
    
    //通过u_id搜索用户全部订单
    select * from shopping_carts
    where u_id = u_id
    
    if(数据库错误)
    {
        return 406
    }
    /*
    *返回用户购物车内容
    */
    return shopping_id、cou_id、cou_num 
}
```
#### 3
##### 场景
>* 移除单个购物车
##### 接口

```php
Param
    token
    shopping_id
Function move_cart()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    delete from shopping_cart where shopping_id = shopping_id
    
    if(数据库错误)
    {
        return 406
    }
    
    return 400
}
```
#### 4
##### 场景
>* 批量移除购物车
##### 接口

```php
Param
    token
    shopping_id[]
Function move_cart()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    delete from shopping_cart where shopping_id[] = shopping_id[]
    
    if(数据库错误)
    {
       return 406
    }
    
    return 400
}
```

#### 5
##### 场景
>* 买家下订单(未付款)
##### 接口

```php
Param
    token
    cou_id
    cou_money
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    insert into orders
    
    update course_2 set cou_state = 2
    where cou_id = cou_id
    
    if(数据库错误)
    {
       return 406
    }
    
    return 400
}
```

#### 6
##### 场景
>* 买家订单列表
##### 接口

```php
Param
    token
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    select * from orders where u_id = u_id
    if(数据库错误)
    {
        406
    }
    
    return order_id、order_time、order_money、cou_id 
}
```

#### 7
##### 场景
>* 取消订单
##### 接口

```php
Param
    token
    order_id      //订单号
Function cou_order()
{
    //check token
    if(token过期)
    {
        return 401
    }
    
    update token
    
    
    if(数据库错误)
    {
        406
    }
    
    return 400
}
```
### 系统场景
#### 1
##### 场景
>* 系统审核
##### 接口

```php
Param
    
Function cou_check()
{
    /*
     *待定
     */
    
}
```

